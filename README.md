# 数学作业批改系统 📚

一个智能的数学作业批改系统，支持拍照或上传图片自动识别学生姓名、题目和答案，并进行自动评分。

## ✨ 功能特点

- 📷 **拍照批改**: 直接使用摄像头拍摄作业进行批改
- 📁 **图片上传**: 支持上传本地图片进行批改
- 👤 **学生识别**: 自动识别作业上的学生姓名
- 📝 **题目识别**: 智能识别数学题目和答案
- 🧮 **公式支持**: 支持数学公式的渲染和识别（KaTeX）
- ✅ **自动评分**: 基于答案正确性自动打分
- 🎨 **Apple风格**: 简洁美观的用户界面
- 🔒 **本地代理**: 安全的后端代理服务，保护API密钥

## 📋 系统要求

- **操作系统**: Windows 10/11
- **Node.js**: v14 或更高版本（首次使用需安装）
- **浏览器**: Chrome、Edge、Firefox 等现代浏览器
- **摄像头**: 用于拍照功能（可选）
- **网络**: 用于API调用

## 🚀 快速开始

### 第一次使用

1. **安装 Node.js**（如果尚未安装）
   - 访问: https://nodejs.org/
   - 下载并安装 LTS 版本
   - 重启命令提示符

2. **安装项目依赖**
   ```bash
   npm install
   ```

3. **启动系统**
   ```
   双击 start.bat 文件
   ```

### 使用流程

1. **启动系统** - 双击 `start.bat`，系统会自动：
   - 检查Node.js
   - 启动后端代理服务器
   - 打开浏览器

2. **获取作业** - 选择以下方式之一：
   - 点击 **📷 拍照批改** 使用摄像头
   - 点击 **📁 上传图片** 上传本地图片

3. **查看结果** - 系统将显示：
   - 学生姓名
   - 每道题目的题目、答案和得分
   - 对错状态和总分

## 📁 项目结构

```
数学作业批改系统/
├── start.bat              # 🖱️ 启动脚本（双击启动）
├── index.html             # 📄 主页面
├── server.js              # 🔧 后端代理服务器
├── package.json           # 📦 Node.js 配置
├── README.md              # 📖 项目说明
├── USAGE.md               # 📘 详细使用说明
├── assets/                # 🎨 资源文件夹
│   ├── css/
│   │   └── style.css      # Apple风格样式
│   ├── js/
│   │   ├── main.js        # 主要逻辑和页面切换
│   │   ├── camera.js      # 摄像头功能
│   │   ├── recognizer.js  # 图像识别
│   │   └── grader.js      # 批改评分
│   └── libs/              # 第三方库
├── docs/                  # 📚 文档
│   ├── 需求分析.md
│   └── 技术实现方案.md
```

## 🛠️ 技术架构

### 前端技术
- **HTML5**: 语义化结构
- **CSS3**: Apple风格UI（毛玻璃、动画、响应式）
- **JavaScript (ES6+)**: 模块化开发
- **KaTeX**: 数学公式渲染

### 后端技术
- **Node.js**: 运行时环境
- **Express**: Web框架
- **CORS**: 跨域资源共享
- **Multer**: 文件上传处理

### 外部服务
- **Moonshot Vision API**: 图像识别和理解

## 📡 API 端点

- `GET /api/health` - 检查服务器状态
- `POST /api/recognize/name` - 识别学生姓名
- `POST /api/recognize/questions` - 识别题目和答案

## 🎯 核心功能

### 1. 图像获取
- ✅ 摄像头实时拍摄
- ✅ 文件上传和预览
- ✅ 拖拽上传支持
- ✅ 多种图片格式支持

### 2. 图像识别
- ✅ 学生姓名自动识别
- ✅ 题目内容提取
- ✅ 答案识别
- ✅ 数学公式支持

### 3. 批改评分
- ✅ 答案比对算法
- ✅ 自动计分
- ✅ 容错处理
- ✅ 统计分析

## 🔒 隐私与安全

- ✅ **数据保护**: 图片仅用于识别，不会保存到服务器
- ✅ **API安全**: 密钥仅存储在本地代理服务中
- ✅ **本地运行**: 代理服务仅监听本机 (127.0.0.1)
- ✅ **无公网暴露**: 外部无法访问本地服务

## 📖 文档

- **[使用说明](USAGE.md)** - 详细的使用步骤和常见问题
- **[需求分析](docs/需求分析.md)** - 详细需求分析
- **[技术实现](docs/技术实现方案.md)** - 技术架构和实现方案

## ❓ 常见问题

### Q: 提示"未检测到 Node.js"
**A:** 请先安装 Node.js: https://nodejs.org/

### Q: 摄像头无法启动
**A:** 检查摄像头权限，确保允许浏览器访问

### Q: 识别失败或准确率低
**A:** 确保图片清晰，光线充足，学生姓名和题目清晰可见

### Q: 代理服务启动失败
**A:** 检查端口3000是否被占用，或手动运行 `npm start`

**更多问题请查看 [USAGE.md](USAGE.md)**

## 📝 使用示例

### 启动系统
```bash
# 双击 start.bat
# 或手动启动
npm start
```

### 检查服务状态
```bash
curl http://localhost:3000/api/health
```

### 开发模式
```bash
npm run dev
```

## 🔄 更新日志

### v1.0.0 (2025-11-09)
- ✅ 初始版本发布
- ✅ 支持拍照和上传批改
- ✅ 自动识别学生姓名和题目
- ✅ Apple风格UI设计
- ✅ 数学公式渲染支持
- ✅ 后端代理服务
- ✅ 完整的错误处理

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

---

**开发者**: 数学老师
**版本**: v1.0.0
**更新时间**: 2025-11-09
